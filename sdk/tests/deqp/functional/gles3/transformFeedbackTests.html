<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>WebGL Transform Feedback Tests</title>
<link rel="stylesheet" href="../../../resources/js-test-style.css"/>
<script src="../../../resources/js-test-pre.js"></script>
<script src="../../../conformance/resources/webgl-test-utils.js"></script>
<script src="../../require.js"></script>
</head>
<body>
<div id="description"></div>
<div id="console"></div>
<canvas id="canvas" width="320" height="240"></canvas>
<script>
console.log("hello world");
    requirejs.config({
        baseUrl: "../../"
    });

    requirejs([
        "functional/gles3/es3fTransformFeedbackTests",
        "framework/opengl/gluVarTypeUtil"
    ], function(tft, gluVTU) {

        var wtu = WebGLTestUtils;
        var gl = wtu.create3DContext('canvas', {preserveDrawingBuffer: true}, 2);

//*
        gl.bindTransformFeedback = function(target, id) {
            console.log('bindTransformFeedback(' + target + ',' + id + ')');
        };
        gl.bufferData = function(target, size, usage) {
            console.log('bufferData(' + target + ',' + size + ',' + usage +')');
        };
        gl.bindBufferBase = function(target, index, buffer) {
            console.log('bindBufferBase(' + target + ',' + index + ',' + buffer +')');
        };
        gl.beginQuery =function(target, primitiveQuery) {
            console.log('beginQuery(' + target + ',' + primitiveQuery +')');
        };
        gl.getError = function() {
            return gl.NO_ERROR;
        };
        gl.getBufferSubData = function(target, offset, returnedData) {
            console.log('getBufferSubData(' + target + ',' + offset + returnedData +')');
        };
//*/
        
/*
        var whitelist = [];
        var blacklist = [
            'bindTransformFeedback', 'bufferData', 'bindBufferBase', 'beginQuery', 'getBufferSubData'
        ];
        
        for (var key in gl.__proto__) {
            if (whitelist.indexOf(key) != -1) continue;
            if (blacklist.indexOf(key) != -1) {
                gl[key] = (function() {
                    console.log("faulty " + key + '(' + arguments + ')');
                });
            }
            else if (typeof(gl.__proto__) == 'function'){
                gl[key] = (function(func) {
                    return (function() {
                        console.log("trying " + key);
                        func.apply(gl, arguments);
                    });
                }(gl[key]));
            }
        }
//*/
        
        try {
            tft.run(gl);
        }
        catch(err) {
            bufferedLogToConsole(err);
        }
        
        
        
    });
</script>
</body>
</html>
